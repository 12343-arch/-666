<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>قادرون - دعم الإعاقة الحركية المتقدم</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Enhanced Motor Support Styling */
        .motor-support-header {
            background: linear-gradient(135deg, #4A90E2 0%, #5FDDE5 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            animation: headerWave 10s ease infinite;
        }

        @keyframes headerWave {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .professional-section {
            background-color: #f9f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-top: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .feature-card {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .interactive-button {
            background-color: #4A90E2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .interactive-button:hover {
            background-color: #3498db;
            transform: scale(1.05);
        }

        .progress-container {
            background-color: #ecf0f1;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #ddd;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(135deg, #4A90E2 0%, #5FDDE5 100%);
            transition: width 0.5s ease;
        }

        .medication-reminder {
            background-color: #fff3cd;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .medication-details {
            flex-grow: 1;
        }

        .timer-section {
            text-align: center;
            margin-top: 20px;
        }

        .timer-display {
            font-size: 2em;
            color: #4A90E2;
            margin-bottom: 15px;
        }

        .accessibility-toggle {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #4A90E2;
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .ai-assistance-section {
            background-color: #f0f4f8;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .ai-chat-interface {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            min-height: 200px;
            margin-top: 15px;
        }

        .tool-section {
            background-color: #f9f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-top: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .device-registration {
            margin-bottom: 20px;
        }

        .device-registration-form {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .device-registration-form input, .device-registration-form select {
            width: 100%;
            height: 40px;
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 10px;
        }

        .registered-devices {
            margin-bottom: 20px;
        }

        .device-controls {
            margin-bottom: 20px;
        }

        .tool-output {
            background-color: #ecf0f1;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .device-control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .device-control-card {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
        }

        .device-control-card .device-name {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .device-control-card .device-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .device-control-card .device-status {
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
        }
        
        .head-eye-control-section {
            margin-top: 20px;
        }
        
        .motion-control-interface {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .camera-preview {
            width: 50%;
            height: 200px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        #head-tracking-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .tracking-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #head-tracking-points {
            font-size: 24px;
            color: #666;
        }
        
        .tracking-status {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            text-align: center;
            background-color: rgba(255, 255, 255, 0.5);
            padding: 10px;
        }
        
        .control-options {
            margin-bottom: 20px;
        }
        
        .control-option {
            margin-bottom: 10px;
        }
        
        .control-actions {
            display: flex;
            gap: 20px;
        }
        
        .motion-control-targets {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .control-target {
            width: 50px;
            height: 50px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .control-targets-row {
            display: flex;
            gap: 20px;
        }
        
        .control-target i {
            font-size: 24px;
        }
        
        .control-target span {
            font-size: 18px;
            margin-top: 10px;
        }
        
        .avatar-assistant-section {
            margin-top: 20px;
        }
        
        .virtual-assistant {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .assistant-avatar {
            width: 100px;
            height: 100px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .assistant-interface {
            background-color: #f0f0f0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
        }
        
        .assistant-message {
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        .assistant-actions {
            display: flex;
            gap: 20px;
        }
        
        .assistant-action {
            background-color: #4A90E2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
        }
        
        .vr-games-section {
            margin-top: 20px;
        }
        
        .vr-games-showcase {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .vr-intro {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .vr-headset {
            width: 50px;
            height: 50px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .vr-description {
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        .vr-games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .vr-game-card {
            background-color: #f0f0f0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
        }
        
        .game-preview {
            width: 100px;
            height: 100px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .game-details {
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        .game-try-btn {
            background-color: #4A90E2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
        }
        
        .mental-robot-section {
            margin-top: 20px;
        }
        
        .mental-robot {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .robot-character {
            width: 100px;
            height: 100px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .mental-exercises {
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        .exercises-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .exercise-card {
            background-color: #f0f0f0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
        }
        
        .exercise-icon {
            width: 50px;
            height: 50px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .exercise-details {
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        .start-exercise-btn {
            background-color: #4A90E2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
        }
        
        .virtual-home-section {
            margin-top: 20px;
        }
        
        .virtual-home {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .home-rooms {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .room-selector {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .room-btn {
            background-color: #f0f0f0;
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
        
        .room-view {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .room-device {
            width: 50px;
            height: 50px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .home-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .home-device-control {
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        .family-alert {
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        .alert-options {
            display: flex;
            gap: 20px;
        }
        
        .alert-btn {
            background-color: #4A90E2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
        }
        
        .smart-wheelchair-section {
            margin-top: 20px;
        }
        
        .wheelchair-customizer {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .wheelchair-preview {
            width: 100px;
            height: 100px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .wheelchair-options {
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        .option-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .option-items {
            display: flex;
            gap: 20px;
        }
        
        .option-btn {
            background-color: #f0f0f0;
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
        
        .device-recommendation {
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        .recommended-devices {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .recommended-device {
            background-color: #f0f0f0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
        }
        
        .device-icon {
            width: 50px;
            height: 50px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .device-details {
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        .device-link-btn {
            background-color: #4A90E2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
        }
        
        .professional-section {
            background-color: #f9f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-top: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .video-consultation-card {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .consultation-header {
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        .consultation-features {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .feature-item {
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        .consultation-schedule {
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        .consultation-actions {
            display: flex;
            gap: 20px;
        }
        
        .interactive-button {
            background-color: #4A90E2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
        }
        
        .consultation-details {
            font-size: 18px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="motor-support-header">
            <h1>قادرون - دعم الإعاقة الحركية المتقدم</h1>
            <p>حلول متكاملة للتمكين والاستقلالية</p>
            <a href="index.html" class="back-btn">العودة للرئيسية</a>
        </header>

        <main>
            <section class="professional-section cognitive-training">
                <h2>التدريب المعرفي والإدراكي</h2>
                <div class="feature-card">
                    <h3>تدريب التركيز والذاكرة</h3>
                    <button id="start-cognitive-training" class="interactive-button">
                        <i class="fas fa-brain"></i> بدء التدريب
                    </button>
                    <div id="cognitive-training-output" class="progress-container" style="display:none;">
                        <div id="training-question-area"></div>
                        <div class="progress-bar">
                            <div class="progress-bar-fill" style="width:0%"></div>
                        </div>
                        <div id="training-score">النتيجة: 0</div>
                    </div>
                </div>
            </section>

            <section class="professional-section medication-management">
                <h2>إدارة الأدوية والتذكير</h2>
                <div class="medication-reminder">
                    <div class="medication-details">
                        <h3>تذكير بالأدوية</h3>
                        <p>تتبع مواعيد تناول الأدوية بدقة</p>
                    </div>
                    <button id="add-medication" class="interactive-button">
                        <i class="fas fa-plus"></i> إضافة دواء
                    </button>
                </div>
                <div class="timer-section">
                    <div id="medication-timer" class="timer-display">00:00:00</div>
                    <button id="start-medication-timer" class="interactive-button">بدء التذكير</button>
                </div>
                <div id="medication-list"></div>
            </section>

            <section class="professional-section accessibility-controls">
                <h2>أدوات التحكم والإتاحة</h2>
                <div class="accessibility-toggle">
                    <label>وضع تكبير النص
                        <div class="toggle-switch">
                            <input type="checkbox" id="text-magnification">
                            <span class="slider"></span>
                        </div>
                    </label>
                    <label>التحكم الصوتي
                        <div class="toggle-switch">
                            <input type="checkbox" id="voice-control">
                            <span class="slider"></span>
                        </div>
                    </label>
                </div>
            </section>

            <section class="professional-section ai-assistance">
                <h2>المساعد الذكي</h2>
                <div class="ai-assistance-section">
                    <p>استمع للمساعدة والدعم في أي وقت</p>
                    <div class="ai-chat-interface" id="ai-chat-area">
                        مرحبًا! كيف يمكنني مساعدتك اليوم؟
                    </div>
                    <button id="ai-voice-assistant" class="interactive-button">
                        <i class="fas fa-microphone"></i> استدعاء المساعد الصوتي
                    </button>
                </div>
            </section>

            <section id="device-control" class="tool-section">
                <h2>التحكم بالأجهزة الإلكترونية</h2>
                <div class="device-registration">
                    <h3>تسجيل الأجهزة</h3>
                    <div class="device-registration-form">
                        <input type="text" id="device-id-input" placeholder="أدخل معرف الجهاز">
                        <select id="device-type-select">
                            <option value="">اختر نوع الجهاز</option>
                            <option value="tv">تلفاز</option>
                            <option value="ac">مكيف</option>
                            <option value="washing-machine">غسالة</option>
                            <option value="light">إضاءة</option>
                            <option value="fan">مروحة</option>
                        </select>
                        <button id="register-device-btn" class="interactive-button">تسجيل الجهاز</button>
                    </div>
                </div>

                <div class="registered-devices">
                    <h3>الأجهزة المسجلة</h3>
                    <ul id="devices-list"></ul>
                </div>

                <div class="device-control-panel">
                    <h3>لوحة التحكم بالأجهزة</h3>
                    <div id="device-control-buttons" class="device-control-grid">
                    </div>
                </div>

                <div class="device-controls">
                    <h3>التحكم الصوتي بالأجهزة</h3>
                    <button id="start-voice-device-control" class="interactive-button">
                        <i class="fas fa-microphone"></i> بدء التحكم الصوتي
                    </button>
                    <div id="device-output" class="tool-output">
                        نتائج التحكم ستظهر هنا
                    </div>
                </div>
            </section>

            <section class="head-eye-control-section">
                <h2>التحكم بحركة الرأس أو العين</h2>
                <div class="motion-control-interface">
                    <div class="camera-preview">
                        <video id="head-tracking-video" autoplay playsinline></video>
                        <div class="tracking-overlay">
                            <div id="head-tracking-points"></div>
                            <div id="tracking-status" class="tracking-status">
                                جاهز للتحكم بحركة الرأس
                            </div>
                        </div>
                    </div>
                    <div class="control-options">
                        <div class="control-option">
                            <input type="radio" id="head-control" name="control-type" checked>
                            <label for="head-control">التحكم بحركة الرأس</label>
                        </div>
                        <div class="control-option">
                            <input type="radio" id="eye-control" name="control-type">
                            <label for="eye-control">التحكم بحركة العين</label>
                        </div>
                    </div>
                    <div class="control-actions">
                        <button id="start-motion-tracking" class="interactive-button">
                            <i class="fas fa-play"></i> بدء التحكم بالحركة
                        </button>
                        <button id="calibrate-tracking" class="interactive-button">
                            <i class="fas fa-crosshairs"></i> معايرة التحكم
                        </button>
                    </div>
                </div>
                <div class="motion-control-targets">
                    <div class="control-target" data-direction="up">
                        <i class="fas fa-arrow-up"></i>
                        <span>أعلى</span>
                    </div>
                    <div class="control-targets-row">
                        <div class="control-target" data-direction="left">
                            <i class="fas fa-arrow-left"></i>
                            <span>يسار</span>
                        </div>
                        <div class="control-target" data-direction="click">
                            <i class="fas fa-mouse-pointer"></i>
                            <span>نقرة</span>
                        </div>
                        <div class="control-target" data-direction="right">
                            <i class="fas fa-arrow-right"></i>
                            <span>يمين</span>
                        </div>
                    </div>
                    <div class="control-target" data-direction="down">
                        <i class="fas fa-arrow-down"></i>
                        <span>أسفل</span>
                    </div>
                </div>
            </section>

            <section class="avatar-assistant-section">
                <h2>المساعد الحركي الافتراضي</h2>
                <div class="virtual-assistant">
                    <div class="assistant-avatar">
                        <div class="avatar-character">
                            <div class="avatar-head"></div>
                            <div class="avatar-body"></div>
                            <div class="avatar-arms">
                                <div class="avatar-arm left"></div>
                                <div class="avatar-arm right"></div>
                            </div>
                        </div>
                    </div>
                    <div class="assistant-interface">
                        <div class="assistant-message">
                            أهلاً، أنا مساعدك الافتراضي. كيف يمكنني مساعدتك؟
                        </div>
                        <div class="assistant-actions">
                            <button class="assistant-action" data-action="appointment">
                                <i class="fas fa-calendar-check"></i>
                                حجز استشارة
                            </button>
                            <button class="assistant-action" data-action="files">
                                <i class="fas fa-file-upload"></i>
                                رفع ملفات
                            </button>
                            <button class="assistant-action" data-action="profile">
                                <i class="fas fa-user-edit"></i>
                                تعديل الملف الشخصي
                            </button>
                            <button class="assistant-action" data-action="help">
                                <i class="fas fa-question-circle"></i>
                                مساعدة
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="vr-games-section">
                <h2>ألعاب علاجية ذكية بتقنية الواقع الافتراضي</h2>
                <div class="vr-games-showcase">
                    <div class="vr-intro">
                        <div class="vr-headset">
                            <i class="fas fa-vr-cardboard"></i>
                        </div>
                        <div class="vr-description">
                            <h3>ألعاب مصممة خصيصاً للتأهيل والعلاج</h3>
                            <p>باستخدام تقنية الواقع الافتراضي للمساعدة في تنشيط الأعصاب والعضلات</p>
                        </div>
                    </div>
                    <div class="vr-games-grid">
                        <div class="vr-game-card">
                            <div class="game-preview" data-game="adventure">
                                <div class="game-icon">
                                    <i class="fas fa-mountain"></i>
                                </div>
                            </div>
                            <div class="game-details">
                                <h4>مغامرة الجبل</h4>
                                <p>لعبة تساعد في تنشيط عضلات الذراعين والكتفين</p>
                                <button class="game-try-btn" data-game="adventure">
                                    <i class="fas fa-play"></i> تجربة اللعبة
                                </button>
                            </div>
                        </div>
                        
                        <div class="vr-game-card">
                            <div class="game-preview" data-game="driving">
                                <div class="game-icon">
                                    <i class="fas fa-car"></i>
                                </div>
                            </div>
                            <div class="game-details">
                                <h4>سباق السيارات</h4>
                                <p>لتحسين التنسيق بين اليدين والعينين</p>
                                <button class="game-try-btn" data-game="driving">
                                    <i class="fas fa-play"></i> تجربة اللعبة
                                </button>
                            </div>
                        </div>
                        
                        <div class="vr-game-card">
                            <div class="game-preview" data-game="rhythm">
                                <div class="game-icon">
                                    <i class="fas fa-music"></i>
                                </div>
                            </div>
                            <div class="game-details">
                                <h4>إيقاع الموسيقى</h4>
                                <p>للتدريب على الحركات المتناسقة مع الإيقاع</p>
                                <button class="game-try-btn" data-game="rhythm">
                                    <i class="fas fa-play"></i> تجربة اللعبة
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mental-robot-section">
                <h2>روبوت الدعم الذهني الحركي</h2>
                <div class="mental-robot">
                    <div class="robot-character">
                        <div class="robot-head">
                            <div class="robot-eyes"></div>
                        </div>
                        <div class="robot-body">
                            <div class="robot-arm left"></div>
                            <div class="robot-arm right"></div>
                        </div>
                    </div>
                    <div class="mental-exercises">
                        <h3>تمارين ذهنية حركية</h3>
                        <div class="exercises-grid">
                            <div class="exercise-card" data-exercise="memory">
                                <div class="exercise-icon">
                                    <i class="fas fa-brain"></i>
                                </div>
                                <h4>تمرين الذاكرة</h4>
                                <p>تذكر وتكرار النمط الحركي</p>
                                <button class="start-exercise-btn" data-exercise="memory">
                                    بدء التمرين
                                </button>
                            </div>
                            
                            <div class="exercise-card" data-exercise="reaction">
                                <div class="exercise-icon">
                                    <i class="fas fa-bolt"></i>
                                </div>
                                <h4>تمرين رد الفعل</h4>
                                <p>تحسين زمن الاستجابة الحركية</p>
                                <button class="start-exercise-btn" data-exercise="reaction">
                                    بدء التمرين
                                </button>
                            </div>
                            
                            <div class="exercise-card" data-exercise="coordination">
                                <div class="exercise-icon">
                                    <i class="fas fa-hands"></i>
                                </div>
                                <h4>تمرين التناسق</h4>
                                <p>تحسين التناسق بين الجانب الأيمن والأيسر</p>
                                <button class="start-exercise-btn" data-exercise="coordination">
                                    بدء التمرين
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="exercise-modal" class="exercise-modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 id="exercise-title">عنوان التمرين</h3>
                            <button id="close-exercise" class="close-btn">&times;</button>
                        </div>
                        <div class="modal-body" id="exercise-body">
                            <!-- Exercise content will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <section class="virtual-home-section">
                <h2>الأجهزة المنزلية الافتراضية</h2>
                <div class="virtual-home">
                    <div class="home-rooms">
                        <div class="room-selector">
                            <button class="room-btn active" data-room="living">غرفة المعيشة</button>
                            <button class="room-btn" data-room="bedroom">غرفة النوم</button>
                            <button class="room-btn" data-room="kitchen">المطبخ</button>
                            <button class="room-btn" data-room="bathroom">الحمام</button>
                        </div>
                        <div class="room-view" id="room-view">
                            <!-- Room visualization will go here -->
                            <div class="living-room">
                                <div class="room-device" data-device="tv">
                                    <i class="fas fa-tv"></i>
                                    <span>التلفاز</span>
                                </div>
                                <div class="room-device" data-device="light">
                                    <i class="fas fa-lightbulb"></i>
                                    <span>الإضاءة</span>
                                </div>
                                <div class="room-device" data-device="fan">
                                    <i class="fas fa-fan"></i>
                                    <span>المروحة</span>
                                </div>
                                <div class="room-device" data-device="ac">
                                    <i class="fas fa-snowflake"></i>
                                    <span>المكيف</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="home-controls">
                        <div class="home-device-control" id="home-device-control">
                            <h3>اختر جهازاً للتحكم به</h3>
                        </div>
                        <div class="family-alert">
                            <h3>إرسال تنبيه للعائلة</h3>
                            <div class="alert-options">
                                <button class="alert-btn" data-alert="help">
                                    <i class="fas fa-hands-helping"></i>
                                    احتاج مساعدة
                                </button>
                                <button class="alert-btn" data-alert="emergency">
                                    <i class="fas fa-ambulance"></i>
                                    حالة طارئة
                                </button>
                                <button class="alert-btn" data-alert="message">
                                    <i class="fas fa-comment-alt"></i>
                                    رسالة خاصة
                                </button>
                            </div>
                            <div class="alert-feedback" id="alert-feedback"></div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="smart-wheelchair-section">
                <h2>كرسي متحرك افتراضي ذكي</h2>
                <div class="wheelchair-customizer">
                    <div class="wheelchair-preview">
                        <div class="wheelchair-model">
                            <div class="wheelchair-seat"></div>
                            <div class="wheelchair-back"></div>
                            <div class="wheelchair-wheel left"></div>
                            <div class="wheelchair-wheel right"></div>
                            <div class="wheelchair-controls"></div>
                        </div>
                    </div>
                    <div class="wheelchair-options">
                        <div class="option-group">
                            <h3>نوع الكرسي</h3>
                            <div class="option-items">
                                <button class="option-btn active" data-type="standard">
                                    قياسي
                                </button>
                                <button class="option-btn" data-type="electric">
                                    كهربائي
                                </button>
                                <button class="option-btn" data-type="sports">
                                    رياضي
                                </button>
                            </div>
                        </div>
                        <div class="option-group">
                            <h3>نظام التحكم</h3>
                            <div class="option-items">
                                <button class="option-btn active" data-control="hand">
                                    يدوي
                                </button>
                                <button class="option-btn" data-control="head">
                                    بحركة الرأس
                                </button>
                                <button class="option-btn" data-control="breath">
                                    بالتنفس
                                </button>
                            </div>
                        </div>
                        <div class="option-group">
                            <h3>مميزات إضافية</h3>
                            <div class="option-items">
                                <label class="feature-checkbox">
                                    <input type="checkbox" data-feature="cushion">
                                    وسادة مخصصة
                                </label>
                                <label class="feature-checkbox">
                                    <input type="checkbox" data-feature="posture">
                                    نظام دعم الجلسة
                                </label>
                                <label class="feature-checkbox">
                                    <input type="checkbox" data-feature="gps">
                                    نظام تحديد المواقع
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="device-recommendation">
                        <h3>أفضل الأجهزة المناسبة لحالتك</h3>
                        <div class="recommended-devices">
                            <div class="recommended-device">
                                <div class="device-icon">
                                    <i class="fas fa-wheelchair"></i>
                                </div>
                                <div class="device-details">
                                    <h4>كرسي متحرك DynaMaster 4000</h4>
                                    <p>كرسي متطور يتناسب مع حالتك</p>
                                    <ul>
                                        <li>نظام تحكم ذكي</li>
                                        <li>خفيف الوزن وسهل الحركة</li>
                                        <li>عمر بطارية طويل</li>
                                    </ul>
                                    <button class="device-link-btn">
                                        <i class="fas fa-external-link-alt"></i> مزيد من المعلومات
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="professional-section video-consultation">
                <h2>الاستشارات المرئية الأسبوعية</h2>
                <div class="video-consultation-card">
                    <div class="consultation-header">
                        <h3>التدريب والتأهيل عن بُعد</h3>
                        <p>مكالمات مرئية أسبوعية مع المؤسس خالد يونس رجب</p>
                    </div>
                    
                    <div class="consultation-features">
                        <div class="feature-item">
                            <i class="fas fa-video"></i>
                            <span>مكالمات فيديو مباشرة</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-user-md"></i>
                            <span>تدريب وتحفيز شخصي</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-calendar-check"></i>
                            <span>جدولة تلقائية أسبوعية</span>
                        </div>
                    </div>

                    <div class="consultation-schedule">
                        <div class="current-schedule">
                            <h4>موعد الاستشارة القادم</h4>
                            <div id="next-consultation-time" class="consultation-time">
                                لم يتم تحديد موعد بعد
                            </div>
                        </div>

                        <div class="consultation-actions">
                            <button id="schedule-consultation" class="interactive-button">
                                <i class="fas fa-calendar-plus"></i> جدولة الاستشارة
                            </button>
                            <button id="start-consultation" class="interactive-button" disabled>
                                <i class="fas fa-phone-alt"></i> بدء المكالمة
                            </button>
                        </div>
                    </div>

                    <div id="consultation-details" class="consultation-details" style="display:none;">
                        <h4>تفاصيل الاستشارة</h4>
                        <div id="consultant-info"></div>
                        <div id="consultation-link"></div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Cognitive Training Logic
            const startCognitiveTrainingBtn = document.getElementById('start-cognitive-training');
            const cognitiveTrainingOutput = document.getElementById('cognitive-training-output');
            const trainingQuestionArea = document.getElementById('training-question-area');
            const trainingScore = document.getElementById('training-score');
            const progressBarFill = document.querySelector('.progress-bar-fill');

            const cognitiveQuestions = [
                {
                    question: "ما هو حاصل 5 + 5؟",
                    correctAnswer: "10",
                    explanation: "5 + 5 = 10 (الجمع البسيط)"
                },
                {
                    question: "ما هي الإجابة الصحيحة للسؤال السابق مضافًا إليها 1؟",
                    correctAnswer: "11",
                    explanation: "الإجابة السابقة (10) + 1 = 11"
                }
            ];

            let currentQuestionIndex = 0;
            let score = 0;

            startCognitiveTrainingBtn.addEventListener('click', () => {
                cognitiveTrainingOutput.style.display = 'block';
                showNextQuestion();
            });

            function showNextQuestion() {
                if (currentQuestionIndex < cognitiveQuestions.length) {
                    const currentQuestion = cognitiveQuestions[currentQuestionIndex];
                    trainingQuestionArea.innerHTML = `
                        <h3>${currentQuestion.question}</h3>
                        <input type="text" id="user-answer" placeholder="أدخل إجابتك">
                        <button id="submit-answer" class="interactive-button">تأكيد الإجابة</button>
                    `;

                    const submitBtn = document.getElementById('submit-answer');
                    submitBtn.addEventListener('click', checkAnswer);
                }
            }

            function checkAnswer() {
                const userAnswer = document.getElementById('user-answer').value.trim();
                const currentQuestion = cognitiveQuestions[currentQuestionIndex];

                if (userAnswer === currentQuestion.correctAnswer) {
                    score++;
                    trainingScore.textContent = `النتيجة: ${score}`;
                    progressBarFill.style.width = `${(currentQuestionIndex + 1) * 50}%`;
                    currentQuestionIndex++;
                    showNextQuestion();
                } else {
                    alert('إجابة خاطئة. حاول مرة أخرى');
                }
            }

            // Medication Management
            const addMedicationBtn = document.getElementById('add-medication');
            const medicationList = document.getElementById('medication-list');
            const startMedicationTimerBtn = document.getElementById('start-medication-timer');
            const medicationTimer = document.getElementById('medication-timer');

            let medications = [];
            let timerInterval;

            addMedicationBtn.addEventListener('click', () => {
                const medicationName = prompt('أدخل اسم الدواء:');
                const medicationTime = prompt('أدخل موعد تناول الدواء (مثال: 08:00 صباحًا):');
                
                if (medicationName && medicationTime) {
                    medications.push({ name: medicationName, time: medicationTime });
                    updateMedicationList();
                }
            });

            function updateMedicationList() {
                medicationList.innerHTML = medications.map(med => 
                    `<div>
                        ${med.name} - ${med.time}
                        <button onclick="removeMedication('${med.name}')">حذف</button>
                    </div>`
                ).join('');
            }

            window.removeMedication = function(name) {
                medications = medications.filter(med => med.name !== name);
                updateMedicationList();
            };

            startMedicationTimerBtn.addEventListener('click', () => {
                let seconds = 0;
                clearInterval(timerInterval);

                timerInterval = setInterval(() => {
                    seconds++;
                    const hours = Math.floor(seconds / 3600);
                    const minutes = Math.floor((seconds % 3600) / 60);
                    const remainingSeconds = seconds % 60;
                    
                    medicationTimer.textContent = 
                        `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;
                }, 1000);
            });

            // AI Voice Assistant
            const aiVoiceAssistantBtn = document.getElementById('ai-voice-assistant');
            const aiChatArea = document.getElementById('ai-chat-area');

            aiVoiceAssistantBtn.addEventListener('click', () => {
                if ('webkitSpeechRecognition' in window) {
                    const recognition = new webkitSpeechRecognition();
                    recognition.lang = 'ar-SA';
                    recognition.onresult = (event) => {
                        const transcript = event.results[0][0].transcript;
                        aiChatArea.innerHTML += `<p>أنت: ${transcript}</p>`;
                        
                        // Simulate AI response
                        setTimeout(() => {
                            const responses = [
                                'كيف يمكنني مساعدتك؟',
                                'أنا هنا للدعم في أي وقت',
                                'هل تريد مساعدة في التدريب أو الأدوية؟'
                            ];
                            const response = responses[Math.floor(Math.random() * responses.length)];
                            aiChatArea.innerHTML += `<p>المساعد الذكي: ${response}</p>`;
                        }, 1000);
                    };
                    recognition.start();
                } else {
                    alert('عذرًا، التعرف الصوتي غير متاح');
                }
            });

            // Accessibility Toggles
            const textMagnificationToggle = document.getElementById('text-magnification');
            const voiceControlToggle = document.getElementById('voice-control');

            textMagnificationToggle.addEventListener('change', () => {
                document.body.classList.toggle('large-text', textMagnificationToggle.checked);
            });

            voiceControlToggle.addEventListener('change', () => {
                // Future implementation of comprehensive voice control
                alert('سيتم تفعيل التحكم الصوتي في التحديثات القادمة');
            });

            class DeviceController {
                constructor() {
                    this.registeredDevices = [];
                    this.initDeviceRegistration();
                    this.initVoiceControl();
                    this.initDeviceControlPanel();
                }

                initDeviceRegistration() {
                    const registerDeviceBtn = document.getElementById('register-device-btn');
                    const deviceIdInput = document.getElementById('device-id-input');
                    const deviceTypeSelect = document.getElementById('device-type-select');
                    const devicesList = document.getElementById('devices-list');

                    registerDeviceBtn.addEventListener('click', () => {
                        const deviceId = deviceIdInput.value.trim();
                        const deviceType = deviceTypeSelect.value;

                        if (deviceId && deviceType) {
                            this.registerDevice(deviceId, deviceType);
                            
                            // Clear input fields
                            deviceIdInput.value = '';
                            deviceTypeSelect.value = '';
                        } else {
                            this.updateOutput('يرجى إدخال معرف الجهاز واختيار نوعه');
                        }
                    });
                }

                registerDevice(deviceId, deviceType) {
                    const existingDevice = this.registeredDevices.find(
                        device => device.id === deviceId
                    );

                    if (existingDevice) {
                        this.updateOutput('هذا الجهاز مسجل بالفعل');
                        return;
                    }

                    const newDevice = { 
                        id: deviceId, 
                        type: deviceType, 
                        status: 'متوقف',
                        power: false 
                    };
                    this.registeredDevices.push(newDevice);

                    this.updateRegisteredDevicesList();
                    this.updateOutput(`تم تسجيل جهاز ${deviceType} بمعرف ${deviceId}`);
                    this.updateDeviceControlPanel();
                }

                updateRegisteredDevicesList() {
                    const devicesList = document.getElementById('devices-list');
                    
                    devicesList.innerHTML = this.registeredDevices.map((device, index) => `
                        <li>
                            ${device.type}: ${device.id} - ${device.status}
                            <button onclick="deviceController.removeDevice(${index})" class="remove-device">×</button>
                        </li>
                    `).join('');
                }

                removeDevice(index) {
                    this.registeredDevices.splice(index, 1);
                    this.updateRegisteredDevicesList();
                    this.updateOutput('تم إزالة الجهاز');
                    this.updateDeviceControlPanel();
                }

                initVoiceControl() {
                    const startVoiceControlBtn = document.getElementById('start-voice-device-control');
                    
                    if ('webkitSpeechRecognition' in window) {
                        const recognition = new webkitSpeechRecognition();
                        recognition.continuous = false;
                        recognition.interimResults = false;
                        recognition.lang = 'ar-SA';

                        startVoiceControlBtn.addEventListener('click', () => {
                            recognition.start();
                            this.updateOutput('انتظار الأمر الصوتي للتحكم بالأجهزة...');
                        });

                        recognition.onresult = (event) => {
                            const command = event.results[0][0].transcript.trim().toLowerCase();
                            this.processDeviceCommand(command);
                        };

                        recognition.onerror = (event) => {
                            this.updateOutput(`خطأ في التعرف على الصوت: ${event.error}`);
                        };
                    } else {
                        startVoiceControlBtn.disabled = true;
                        this.updateOutput('التحكم الصوتي غير متاح على هذا المتصفح');
                    }
                }

                processDeviceCommand(command) {
                    const deviceCommands = {
                        'التلفاز': () => this.controlDevice('tv', 'toggle'),
                        'المكيف': () => this.controlDevice('ac', 'toggle'),
                        'الغسالة': () => this.controlDevice('washing-machine', 'toggle'),
                        'الإضاءة': () => this.controlDevice('light', 'toggle'),
                        'المروحة': () => this.controlDevice('fan', 'toggle')
                    };

                    for (const [keyword, action] of Object.entries(deviceCommands)) {
                        if (command.includes(keyword)) {
                            action();
                            return;
                        }
                    }

                    this.updateOutput(`أمر غير مفهوم: ${command}`);
                }

                controlDevice(deviceType, action) {
                    const device = this.registeredDevices.find(d => d.type === deviceType);

                    if (!device) {
                        this.updateOutput(`الجهاز ${deviceType} غير مسجل`);
                        return;
                    }

                    switch(action) {
                        case 'toggle':
                            device.power = !device.power;
                            device.status = device.power ? 'مشغل' : 'متوقف';
                            this.updateRegisteredDevicesList();
                            this.updateOutput(`تم ${device.status} جهاز ${deviceType}`);
                            break;
                        default:
                            this.updateOutput('أمر غير معروف');
                    }
                }

                updateOutput(message) {
                    const outputElement = document.getElementById('device-output');
                    outputElement.textContent = message;

                    // Optional: Text-to-Speech for output
                    if ('speechSynthesis' in window) {
                        const utterance = new SpeechSynthesisUtterance(message);
                        utterance.lang = 'ar-SA';
                        window.speechSynthesis.speak(utterance);
                    }
                }

                initDeviceControlPanel() {
                    const deviceControlButtons = document.getElementById('device-control-buttons');

                    this.updateDeviceControlPanel = () => {
                        deviceControlButtons.innerHTML = '';
                        this.registeredDevices.forEach(device => {
                            const deviceCard = document.createElement('div');
                            deviceCard.classList.add('device-control-card');
                            
                            deviceCard.innerHTML = `
                                <div class="device-name">${this.getDeviceTypeName(device.type)}</div>
                                <div class="device-buttons">
                                    <button class="interactive-button power-btn" data-id="${device.id}">
                                        ${device.power ? 'إيقاف' : 'تشغيل'}
                                    </button>
                                    ${this.getDeviceSpecificControls(device)}
                                </div>
                                <div class="device-status">الحالة: ${device.power ? 'مشغل' : 'متوقف'}</div>
                            `;

                            deviceControlButtons.appendChild(deviceCard);

                            // Add event listeners for power and specific controls
                            deviceCard.querySelector('.power-btn').addEventListener('click', () => {
                                this.toggleDevicePower(device.id);
                            });

                            this.addSpecificControlListeners(deviceCard, device);
                        });
                    };
                }

                getDeviceTypeName(type) {
                    const deviceNames = {
                        'tv': 'التلفاز',
                        'ac': 'المكيف',
                        'washing-machine': 'الغسالة',
                        'light': 'الإضاءة',
                        'fan': 'المروحة'
                    };
                    return deviceNames[type] || type;
                }

                getDeviceSpecificControls(device) {
                    switch(device.type) {
                        case 'tv':
                            return `
                                <button class="interactive-button volume-up-btn" data-id="${device.id}">رفع الصوت +</button>
                                <button class="interactive-button volume-down-btn" data-id="${device.id}">خفض الصوت -</button>
                            `;
                        case 'ac':
                            return `
                                <button class="interactive-button temp-up-btn" data-id="${device.id}">رفع درجة الحرارة +</button>
                                <button class="interactive-button temp-down-btn" data-id="${device.id}">خفض درجة الحرارة -</button>
                            `;
                        case 'washing-machine':
                            return `
                                <button class="interactive-button start-btn" data-id="${device.id}">بدء الغسيل</button>
                                <button class="interactive-button stop-btn" data-id="${device.id}">إيقاف الغسيل</button>
                            `;
                        default:
                            return '';
                    }
                }

                addSpecificControlListeners(deviceCard, device) {
                    const volumeUpBtn = deviceCard.querySelector('.volume-up-btn');
                    const volumeDownBtn = deviceCard.querySelector('.volume-down-btn');
                    const tempUpBtn = deviceCard.querySelector('.temp-up-btn');
                    const tempDownBtn = deviceCard.querySelector('.temp-down-btn');
                    const startBtn = deviceCard.querySelector('.start-btn');
                    const stopBtn = deviceCard.querySelector('.stop-btn');

                    if (volumeUpBtn) volumeUpBtn.addEventListener('click', () => this.adjustDeviceSetting(device.id, 'volume', 'up'));
                    if (volumeDownBtn) volumeDownBtn.addEventListener('click', () => this.adjustDeviceSetting(device.id, 'volume', 'down'));
                    if (tempUpBtn) tempUpBtn.addEventListener('click', () => this.adjustDeviceSetting(device.id, 'temperature', 'up'));
                    if (tempDownBtn) tempDownBtn.addEventListener('click', () => this.adjustDeviceSetting(device.id, 'temperature', 'down'));
                    if (startBtn) startBtn.addEventListener('click', () => this.operateWashingMachine(device.id, 'start'));
                    if (stopBtn) stopBtn.addEventListener('click', () => this.operateWashingMachine(device.id, 'stop'));
                }

                toggleDevicePower(deviceId) {
                    const device = this.registeredDevices.find(d => d.id === deviceId);
                    if (device) {
                        device.power = !device.power;
                        this.updateOutput(`تم ${device.power ? 'تشغيل' : 'إيقاف'} جهاز ${this.getDeviceTypeName(device.type)}`);
                        this.updateDeviceControlPanel();
                    }
                }

                adjustDeviceSetting(deviceId, setting, action) {
                    const device = this.registeredDevices.find(d => d.id === deviceId);
                    if (device && device.power) {
                        switch(setting) {
                            case 'volume':
                                device.volume = device.volume || 50;
                                device.volume += action === 'up' ? 10 : -10;
                                device.volume = Math.max(0, Math.min(100, device.volume));
                                this.updateOutput(`مستوى الصوت للتلفاز: ${device.volume}`);
                                break;
                            case 'temperature':
                                device.temperature = device.temperature || 25;
                                device.temperature += action === 'up' ? 1 : -1;
                                device.temperature = Math.max(16, Math.min(30, device.temperature));
                                this.updateOutput(`درجة حرارة المكيف: ${device.temperature}`);
                                break;
                        }
                        this.updateDeviceControlPanel();
                    }
                }

                operateWashingMachine(deviceId, action) {
                    const device = this.registeredDevices.find(d => d.id === deviceId);
                    if (device && device.power) {
                        switch(action) {
                            case 'start':
                                device.running = true;
                                this.updateOutput('بدأ برنامج الغسيل');
                                break;
                            case 'stop':
                                device.running = false;
                                this.updateOutput('تم إيقاف الغسيل');
                                break;
                        }
                        this.updateDeviceControlPanel();
                    }
                }
            }

            // Initialize device controller when the page loads
            window.deviceController = new DeviceController();
        });
    </script>
    
    <script>
        // Head/Eye Motion Control
        const startMotionTrackingBtn = document.getElementById('start-motion-tracking');
        const calibrateTrackingBtn = document.getElementById('calibrate-tracking');
        const headTrackingVideo = document.getElementById('head-tracking-video');
        const headTrackingPoints = document.getElementById('head-tracking-points');
        const trackingStatus = document.getElementById('tracking-status');
        const controlTargets = document.querySelectorAll('.control-target');
        
        startMotionTrackingBtn.addEventListener('click', () => {
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(stream => {
                        headTrackingVideo.srcObject = stream;
                        startMotionTrackingBtn.disabled = true;
                        calibrateTrackingBtn.disabled = false;
                        
                        trackingStatus.textContent = 'جاري تتبع حركة الرأس...';
                        
                        // Simulate head tracking points
                        headTrackingPoints.innerHTML = `
                            <div class="tracking-point" style="left: 40%; top: 30%"></div>
                            <div class="tracking-point" style="left: 60%; top: 30%"></div>
                            <div class="tracking-point" style="left: 50%; top: 40%"></div>
                            <div class="tracking-point" style="left: 45%; top: 50%"></div>
                            <div class="tracking-point" style="left: 55%; top: 50%"></div>
                        `;
                        
                        // Simulate cursor movement with head
                        simulateHeadTracking();
                    })
                    .catch(err => {
                        console.error('Error accessing camera: ', err);
                        trackingStatus.textContent = 'خطأ في الوصول إلى الكاميرا';
                    });
            } else {
                trackingStatus.textContent = 'عذراً، متصفحك لا يدعم الوصول إلى الكاميرا';
            }
        });
        
        calibrateTrackingBtn.addEventListener('click', () => {
            trackingStatus.textContent = 'جاري معايرة التتبع... انظر للأمام مباشرة';
            
            setTimeout(() => {
                trackingStatus.textContent = 'انظر لليمين';
                setTimeout(() => {
                    trackingStatus.textContent = 'انظر لليسار';
                    setTimeout(() => {
                        trackingStatus.textContent = 'انظر للأعلى';
                        setTimeout(() => {
                            trackingStatus.textContent = 'انظر للأسفل';
                            setTimeout(() => {
                                trackingStatus.textContent = 'تمت المعايرة بنجاح!';
                            }, 1000);
                        }, 1000);
                    }, 1000);
                }, 1000);
            }, 1000);
        });
        
        let headCursor;
        
        function simulateHeadTracking() {
            // Create head-controlled cursor
            headCursor = document.createElement('div');
            headCursor.className = 'head-cursor';
            document.body.appendChild(headCursor);
            
            let cursorX = window.innerWidth / 2;
            let cursorY = window.innerHeight / 2;
            
            headCursor.style.left = `${cursorX}px`;
            headCursor.style.top = `${cursorY}px`;
            
            // Simulate random cursor movement to demonstrate head tracking
            let targetX = cursorX;
            let targetY = cursorY;
            
            setInterval(() => {
                // Randomly update target position to simulate head movement
                if (Math.random() > 0.7) {
                    targetX = Math.random() * window.innerWidth;
                    targetY = Math.random() * window.innerHeight;
                }
                
                // Smooth movement
                cursorX += (targetX - cursorX) * 0.05;
                cursorY += (targetY - cursorY) * 0.05;
                
                headCursor.style.left = `${cursorX}px`;
                headCursor.style.top = `${cursorY}px`;
                
                // Check for hover over control targets
                controlTargets.forEach(target => {
                    const rect = target.getBoundingClientRect();
                    
                    if (
                        cursorX >= rect.left && 
                        cursorX <= rect.right && 
                        cursorY >= rect.top && 
                        cursorY <= rect.bottom
                    ) {
                        target.classList.add('hover');
                        
                        // Simulate click after hovering
                        if (Math.random() > 0.95) {
                            target.classList.add('active');
                            
                            const direction = target.getAttribute('data-direction');
                            trackingStatus.textContent = `تم تنفيذ الأمر: ${getDirectionName(direction)}`;
                            
                            setTimeout(() => {
                                target.classList.remove('active');
                            }, 200);
                        }
                    } else {
                        target.classList.remove('hover');
                    }
                });
            }, 50);
        }
        
        function getDirectionName(direction) {
            switch(direction) {
                case 'up': return 'أعلى';
                case 'down': return 'أسفل';
                case 'left': return 'يسار';
                case 'right': return 'يمين';
                case 'click': return 'نقرة';
                default: return direction;
            }
        }
        
        // Virtual Assistant
        const assistantActions = document.querySelectorAll('.assistant-action');
        const assistantMessage = document.querySelector('.assistant-message');
        const avatarArms = document.querySelectorAll('.avatar-arm');
        
        assistantActions.forEach(action => {
            action.addEventListener('click', () => {
                const actionType = action.getAttribute('data-action');
                
                // Animate avatar arms
                avatarArms.forEach(arm => {
                    arm.style.animation = 'assistantGesture 1s';
                    
                    setTimeout(() => {
                        arm.style.animation = '';
                    }, 1000);
                });
                
                // Handle different actions
                switch(actionType) {
                    case 'appointment':
                        assistantMessage.textContent = 'بالتأكيد! سأساعدك في حجز استشارة. هل تفضل استشارة طبية أم تأهيلية؟';
                        break;
                    case 'files':
                        assistantMessage.textContent = 'يمكنك رفع الملفات هنا. أنا سأتأكد من وصولها للأشخاص المناسبين.';
                        break;
                    case 'profile':
                        assistantMessage.textContent = 'حسناً، سأساعدك في تعديل ملفك الشخصي. ما هي المعلومات التي تريد تحديثها؟';
                        break;
                    case 'help':
                        assistantMessage.textContent = 'أنا هنا لمساعدتك في حجز الاستشارات، رفع الملفات، وتعديل ملفك الشخصي. ماذا تحتاج تحديداً؟';
                        break;
                }
            });
        });
        
        // VR Therapy Games
        const gameTryButtons = document.querySelectorAll('.game-try-btn');
        
        gameTryButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const gameType = btn.getAttribute('data-game');
                
                // Simple game simulation
                showVRGameSimulation(gameType);
            });
        });
        
        function showVRGameSimulation(gameType) {
            const gameWindow = window.open('', 'VR_Game_Simulation', 'width=800,height=600');
            
            let gameTitle, gameDescription, gameInstructions;
            
            switch(gameType) {
                case 'adventure':
                    gameTitle = 'مغامرة الجبل';
                    gameDescription = 'اصعد الجبل وتغلب على التحديات لتحسين قدراتك الحركية';
                    gameInstructions = 'حرك ذراعيك للأعلى لتسلق الجبل، وللجانبين لتجاوز العقبات';
                    break;
                case 'driving':
                    gameTitle = 'سباق السيارات';
                    gameDescription = 'قم بقيادة السيارة وتجاوز العقبات لتحسين التنسيق بين يديك وعينيك';
                    gameInstructions = 'أمل رأسك للتوجيه، وارفع ذراعك للتسريع، واخفضها للفرملة';
                    break;
                case 'rhythm':
                    gameTitle = 'إيقاع الموسيقى';
                    gameDescription = 'اتبع الإيقاع واضغط على النقاط في التوقيت المناسب';
                    gameInstructions = 'حرك يديك وفقاً للإيقاع وانقر على النقاط الملونة عندما تصل إليك';
                    break;
            }
            
            gameWindow.document.write(`
                <!DOCTYPE html>
                <html dir="rtl">
                <head>
                    <meta charset="UTF-8">
                    <title>${gameTitle} - VR</title>
                    <style>
                        body {
                            font-family: 'Cairo', sans-serif;
                            margin: 0;
                            padding: 0;
                            background-color: #2c3e50;
                            color: white;
                            display: flex;
                            flex-direction: column;
                            height: 100vh;
                        }
                        
                        .game-header {
                            background-color: #34495e;
                            padding: 20px;
                            text-align: center;
                        }
                        
                        .game-container {
                            flex-grow: 1;
                            display: flex;
                            flex-direction: column;
                            justify-content: center;
                            align-items: center;
                            padding: 20px;
                        }
                        
                        .game-canvas {
                            width: 800px;
                            height: 400px;
                            background-color: #3498db;
                            border-radius: 10px;
                            position: relative;
                            overflow: hidden;
                            margin-bottom: 20px;
                        }
                        
                        .game-player {
                            position: absolute;
                            width: 50px;
                            height: 50px;
                            background-color: #e74c3c;
                            border-radius: 50%;
                            bottom: 50px;
                            left: 50px;
                            transition: all 0.2s ease;
                        }
                        
                        .game-obstacle {
                            position: absolute;
                            width: 30px;
                            height: 30px;
                            background-color: #f1c40f;
                            border-radius: 5px;
                            transition: all 0.2s linear;
                        }
                        
                        .game-instructions {
                            background-color: #34495e;
                            padding: 20px;
                            border-radius: 10px;
                            margin-bottom: 20px;
                        }
                        
                        .game-controls {
                            display: flex;
                            gap: 20px;
                        }
                        
                        .game-btn {
                            padding: 10px 20px;
                            background-color: #e74c3c;
                            color: white;
                            border: none;
                            border-radius: 5px;
                            cursor: pointer;
                        }
                    </style>
                </head>
                <body>
                    <div class="game-header">
                        <h1>${gameTitle}</h1>
                        <p>${gameDescription}</p>
                    </div>
                    
                    <div class="game-container">
                        <div class="game-instructions">
                            <h3>تعليمات اللعبة:</h3>
                            <p>${gameInstructions}</p>
                        </div>
                        
                        <div class="game-canvas">
                            <div class="game-player"></div>
                        </div>
                        
                        <div class="game-controls">
                            <button class="game-btn" id="start-game">بدء اللعبة</button>
                            <button class="game-btn" id="close-game">إغلاق</button>
                        </div>
                    </div>
                    
                    <script>
                        const player = document.querySelector('.game-player');
                        const canvas = document.querySelector('.game-canvas');
                        const startGameBtn = document.getElementById('start-game');
                        const closeGameBtn = document.getElementById('close-game');
                        
                        let gameRunning = false;
                        let obstacles = [];
                        let score = 0;
                        
                        startGameBtn.addEventListener('click', () => {
                            if (!gameRunning) {
                                gameRunning = true;
                                startGame();
                                startGameBtn.textContent = 'إيقاف اللعبة';
                            } else {
                                gameRunning = false;
                                stopGame();
                                startGameBtn.textContent = 'بدء اللعبة';
                            }
                        });
                        
                        closeGameBtn.addEventListener('click', () => {
                            window.close();
                        });
                        
                        function startGame() {
                            // Create random obstacles
                            const obstacleInterval = setInterval(() => {
                                if (!gameRunning) {
                                    clearInterval(obstacleInterval);
                                    return;
                                }
                                
                                createObstacle();
                            }, 1000);
                            
                            // Move player with mouse
                            canvas.addEventListener('mousemove', movePlayer);
                            
                            // Update game state
                            gameLoop();
                        }
                        
                        function stopGame() {
                            // Remove all obstacles
                            obstacles.forEach(obstacle => {
                                obstacle.element.remove();
                            });
                            obstacles = [];
                            
                            // Reset player position
                            player.style.bottom = '50px';
                            player.style.left = '50px';
                            
                            canvas.removeEventListener('mousemove', movePlayer);
                        }
                        
                        function createObstacle() {
                            const obstacle = document.createElement('div');
                            obstacle.className = 'game-obstacle';
                            
                            const top = Math.random() * (canvas.clientHeight - 30);
                            
                            obstacle.style.top = top + 'px';
                            obstacle.style.right = '0';
                            
                            canvas.appendChild(obstacle);
                            
                            obstacles.push({
                                element: obstacle,
                                position: { top, right: 0 }
                            });
                        }
                        
                        function movePlayer(e) {
                            const rect = canvas.getBoundingClientRect();
                            const x = e.clientX - rect.left;
                            const y = e.clientY - rect.top;
                            
                            player.style.left = Math.max(0, Math.min(x - 25, canvas.clientWidth - 50)) + 'px';
                            player.style.bottom = Math.max(0, Math.min(canvas.clientHeight - y - 25, canvas.clientHeight - 50)) + 'px';
                        }
                        
                        function gameLoop() {
                            if (!gameRunning) return;
                            
                            // Move obstacles
                            obstacles.forEach((obstacle, index) => {
                                obstacle.position.right += 5;
                                obstacle.element.style.right = obstacle.position.right + 'px';
                                
                                // Remove obstacles that are off-screen
                                if (obstacle.position.right > canvas.clientWidth) {
                                    obstacle.element.remove();
                                    obstacles.splice(index, 1);
                                    score++;
                                }
                                
                                // Check for collision
                                checkCollision(obstacle);
                            });
                            
                            requestAnimationFrame(gameLoop);
                        }
                        
                        function checkCollision(obstacle) {
                            const playerRect = player.getBoundingClientRect();
                            const obstacleRect = obstacle.element.getBoundingClientRect();
                            
                            if (
                                playerRect.left < obstacleRect.right &&
                                playerRect.right > obstacleRect.left &&
                                playerRect.top < obstacleRect.bottom &&
                                playerRect.bottom > obstacleRect.top
                            ) {
                                // Collision detected
                                gameRunning = false;
                                stopGame();
                                alert('انتهت اللعبة! النتيجة: ' + score);
                                startGameBtn.textContent = 'بدء اللعبة';
                            }
                        }
                    </script>
                </body>
                </html>
            `);
        }
        
        // Mental Robot Exercises
        const startExerciseButtons = document.querySelectorAll('.start-exercise-btn');
        const exerciseModal = document.getElementById('exercise-modal');
        const exerciseTitle = document.getElementById('exercise-title');
        const exerciseBody = document.getElementById('exercise-body');
        const closeExerciseBtn = document.getElementById('close-exercise');
        
        startExerciseButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const exerciseType = btn.getAttribute('data-exercise');
                
                loadExercise(exerciseType);
                exerciseModal.style.display = 'flex';
            });
        });
        
        closeExerciseBtn.addEventListener('click', () => {
            exerciseModal.style.display = 'none';
        });
        
        function loadExercise(exerciseType) {
            let title, content;
            
            switch(exerciseType) {
                case 'memory':
                    title = 'تمرين الذاكرة الحركي';
                    content = `
                        <div class="memory-exercise">
                            <p class="exercise-instructions">اضغط على المربعات بنفس الترتيب الذي تضيء به</p>
                            <div class="memory-grid">
                                <div class="memory-cell" data-index="0"></div>
                                <div class="memory-cell" data-index="1"></div>
                                <div class="memory-cell" data-index="2"></div>
                                <div class="memory-cell" data-index="3"></div>
                            </div>
                            <div class="exercise-controls">
                                <button id="start-memory" class="exercise-btn">بدء التمرين</button>
                                <div class="exercise-status">مستوى: <span id="memory-level">1</span></div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'reaction':
                    title = 'تمرين رد الفعل';
                    content = `
                        <div class="reaction-exercise">
                            <p class="exercise-instructions">اضغط على الدائرة بمجرد ظهورها</p>
                            <div class="reaction-area">
                                <div class="reaction-target"></div>
                            </div>
                            <div class="exercise-controls">
                                <button id="start-reaction" class="exercise-btn">بدء التمرين</button>
                                <div class="exercise-status">متوسط الزمن: <span id="reaction-time">0</span> مللي ثانية</div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'coordination':
                    title = 'تمرين التناسق';
                    content = `
                        <div class="coordination-exercise">
                            <p class="exercise-instructions">حاول متابعة الخط الأزرق بدقة باستخدام المؤشر</p>
                            <div class="coordination-area">
                                <svg width="400" height="200" class="coordination-svg">
                                    <path d="M50,100 Q125,50 200,100 Q275,150 350,100" stroke="#3498db" stroke-width="5" fill="none" />
                                    <circle cx="50" cy="100" r="10" fill="#e74c3c" class="coordination-cursor" />
                                </svg>
                            </div>
                            <div class="exercise-controls">
                                <button id="start-coordination" class="exercise-btn">بدء التمرين</button>
                                <div class="exercise-status">الدقة: <span id="coordination-accuracy">0</span>%</div>
                            </div>
                        </div>
                    `;
                    break;
            }
            
            exerciseTitle.textContent = title;
            exerciseBody.innerHTML = content;
            
            // Initialize exercise
            switch(exerciseType) {
                case 'memory':
                    initMemoryExercise();
                    break;
                case 'reaction':
                    initReactionExercise();
                    break;
                case 'coordination':
                    initCoordinationExercise();
                    break;
            }
        }
        
        function initMemoryExercise() {
            const startMemoryBtn = document.getElementById('start-memory');
            const memoryCells = document.querySelectorAll('.memory-cell');
            const memoryLevelDisplay = document.getElementById('memory-level');
            
            let sequence = [];
            let userSequence = [];
            let level = 1;
            let playing = false;
            
            startMemoryBtn.addEventListener('click', () => {
                if (!playing) {
                    playing = true;
                    startMemoryBtn.disabled = true;
                    startMemoryBtn.textContent = 'انتظر...';
                    
                    // Reset
                    sequence = [];
                    userSequence = [];
                    
                    // Start new round
                    addToSequence();
                }
            });
            
            memoryCells.forEach(cell => {
                cell.addEventListener('click', () => {
                    if (playing && !cell.classList.contains('active')) {
                        const index = parseInt(cell.getAttribute('data-index'));
                        
                        // Light up the cell briefly
                        cell.classList.add('active');
                        setTimeout(() => {
                            cell.classList.remove('active');
                        }, 300);
                        
                        userSequence.push(index);
                        
                        // Check if the user's sequence is correct so far
                        if (userSequence[userSequence.length - 1] !== sequence[userSequence.length - 1]) {
                            // Wrong sequence
                            playing = false;
                            startMemoryBtn.disabled = false;
                            startMemoryBtn.textContent = 'حاول مرة أخرى';
                            
                            alert(`انتهى التمرين! وصلت للمستوى ${level}`);
                            level = 1;
                            memoryLevelDisplay.textContent = level;
                            return;
                        }
                        
                        // If user completed the sequence correctly
                        if (userSequence.length === sequence.length) {
                            userSequence = [];
                            level++;
                            memoryLevelDisplay.textContent = level;
                            
                            setTimeout(() => {
                                addToSequence();
                            }, 1000);
                        }
                    }
                });
            });
            
            function addToSequence() {
                const randomIndex = Math.floor(Math.random() * 4);
                sequence.push(randomIndex);
                
                // Display the sequence
                displaySequence(0);
            }
            
            function displaySequence(step) {
                if (step < sequence.length) {
                    const cellIndex = sequence[step];
                    const cell = document.querySelector(`.memory-cell[data-index="${cellIndex}"]`);
                    
                    // Light up the cell
                    cell.classList.add('active');
                    
                    setTimeout(() => {
                        cell.classList.remove('active');
                        
                        // Display next step after a delay
                        setTimeout(() => {
                            displaySequence(step + 1);
                        }, 300);
                    }, 500);
                } else {
                    // End of sequence, user's turn
                    startMemoryBtn.textContent = 'كرر التسلسل';
                    startMemoryBtn.disabled = false;
                }
            }
        }
        
        function initReactionExercise() {
            const startReactionBtn = document.getElementById('start-reaction');
            const reactionTarget = document.querySelector('.reaction-target');
            const reactionTimeDisplay = document.getElementById('reaction-time');
            
            let reactionTimes = [];
            let startTime;
            let timeoutId;
            
            startReactionBtn.addEventListener('click', () => {
                startReactionBtn.disabled = true;
                reactionTarget.style.display = 'none';
                
                // Reset
                reactionTimes = [];
                reactionTimeDisplay.textContent = '0';
                
                // Start the exercise
                scheduleTarget();
            });
            
            reactionTarget.addEventListener('click', () => {
                if (startTime) {
                    const endTime = Date.now();
                    const reactionTime = endTime - startTime;
                    
                    reactionTimes.push(reactionTime);
                    
                    const averageTime = Math.round(reactionTimes.reduce((sum, time) => sum + time, 0) / reactionTimes.length);
                    reactionTimeDisplay.textContent = averageTime;
                    
                    reactionTarget.style.display = 'none';
                    
                    if (reactionTimes.length < 5) {
                        scheduleTarget();
                    } else {
                        startReactionBtn.disabled = false;
                        startReactionBtn.textContent = 'بدء من جديد';
                    }
                }
            });
            
            function scheduleTarget() {
                // Random delay between 1-5 seconds
                const delay = Math.random() * 4000 + 1000;
                
                timeoutId = setTimeout(() => {
                    // Random position
                    const x = Math.random() * (reactionTarget.parentElement.clientWidth - 50);
                    const y = Math.random() * (reactionTarget.parentElement.clientHeight - 50);
                    
                    reactionTarget.style.left = `${x}px`;
                    reactionTarget.style.top = `${y}px`;
                    
                    // Show the target
                    reactionTarget.style.display = 'block';
                    
                    // Record start time
                    startTime = Date.now();
                }, delay);
            }
        }
        
        function initCoordinationExercise() {
            const startCoordinationBtn = document.getElementById('start-coordination');
            const coordinationCursor = document.querySelector('.coordination-cursor');
            const coordinationAccuracy = document.getElementById('coordination-accuracy');
            
            let pathPoints = [];
            let userPoints = [];
            let coordinationInterval;
            let pathLength;
            
            startCoordinationBtn.addEventListener('click', () => {
                startCoordinationBtn.disabled = true;
                
                // Reset
                pathPoints = [];
                userPoints = [];
                coordinationAccuracy.textContent = '0';
                
                // Calculate path points
                const path = document.querySelector('.coordination-svg path');
                pathLength = path.getTotalLength();
                
                for (let i = 0; i <= 50; i++) {
                    const point = path.getPointAtLength(pathLength * (i / 50));
                    pathPoints.push({ x: point.x, y: point.y });
                }
                
                // Reset cursor position
                coordinationCursor.setAttribute('cx', pathPoints[0].x);
                coordinationCursor.setAttribute('cy', pathPoints[0].y);
                
                // Start the exercise
                let currentPoint = 0;
                
                coordinationInterval = setInterval(() => {
                    if (currentPoint >= pathPoints.length) {
                        clearInterval(coordinationInterval);
                        calculateAccuracy();
                        startCoordinationBtn.disabled = false;
                        return;
                    }
                    
                    // Move cursor along the path
                    coordinationCursor.setAttribute('cx', pathPoints[currentPoint].x);
                    coordinationCursor.setAttribute('cy', pathPoints[currentPoint].y);
                    
                    currentPoint++;
                }, 100);
                
                // Track mouse movement
                const svg = document.querySelector('.coordination-svg');
                
                svg.addEventListener('mousemove', trackMousePosition);
            });
            
            function trackMousePosition(e) {
                const svg = document.querySelector('.coordination-svg');
                const rect = svg.getBoundingClientRect();
                
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                userPoints.push({ x, y });
            }
            
            function calculateAccuracy() {
                // Simple implementation: compare distances between user path and target path
                let totalDistance = 0;
                const sampleCount = Math.min(userPoints.length, pathPoints.length);
                
                for (let i = 0; i < sampleCount; i++) {
                    const userPointIndex = Math.floor((i / sampleCount) * userPoints.length);
                    const userPoint = userPoints[userPointIndex];
                    const pathPoint = pathPoints[i];
                    
                    const distance = Math.sqrt(
                        Math.pow(userPoint.x - pathPoint.x, 2) + 
                        Math.pow(userPoint.y - pathPoint.y, 2)
                    );
                    
                    totalDistance += distance;
                }
                
                const averageDistance = totalDistance / sampleCount;
                const maxPossibleDistance = Math.sqrt(Math.pow(svg.width.baseVal.value, 2) + Math.pow(svg.height.baseVal.value, 2));
                
                // Convert to accuracy percentage (0-100)
                const accuracy = Math.max(0, Math.min(100, Math.round(100 - (averageDistance / maxPossibleDistance * 100))));
                
                coordinationAccuracy.textContent = accuracy;
            }
        }
        
        // Virtual Home Control
        const roomButtons = document.querySelectorAll('.room-btn');
        const roomView = document.getElementById('room-view');
        const homeDeviceControl = document.getElementById('home-device-control');
        const alertButtons = document.querySelectorAll('.alert-btn');
        const alertFeedback = document.getElementById('alert-feedback');
        
        roomButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                roomButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                const roomType = btn.getAttribute('data-room');
                changeRoom(roomType);
            });
        });
        
        function changeRoom(roomType) {
            let devices;
            
            switch(roomType) {
                case 'living':
                    devices = [
                        { type: 'tv', name: 'التلفاز', icon: 'fa-tv' },
                        { type: 'light', name: 'الإضاءة', icon: 'fa-lightbulb' },
                        { type: 'fan', name: 'المروحة', icon: 'fa-fan' },
                        { type: 'ac', name: 'المكيف', icon: 'fa-snowflake' }
                    ];
                    break;
                case 'bedroom':
                    devices = [
                        { type: 'light', name: 'الإضاءة', icon: 'fa-lightbulb' },
                        { type: 'ac', name: 'المكيف', icon: 'fa-snowflake' },
                        { type: 'curtain', name: 'الستائر', icon: 'fa-grip-lines' }
                    ];
                    break;
                case 'kitchen':
                    devices = [
                        { type: 'light', name: 'الإضاءة', icon: 'fa-lightbulb' },
                        { type: 'fridge', name: 'الثلاجة', icon: 'fa-temperature-low' },
                        { type: 'oven', name: 'الفرن', icon: 'fa-fire' }
                    ];
                    break;
                case 'bathroom':
                    devices = [
                        { type: 'light', name: 'الإضاءة', icon: 'fa-lightbulb' },
                        { type: 'water', name: 'المياه', icon: 'fa-tint' },
                        { type: 'vent', name: 'التهوية', icon: 'fa-wind' }
                    ];
                    break;
            }
            
            // Update room view with devices
            roomView.innerHTML = `
                <div class="${roomType}-room">
                    ${devices.map(device => `
                        <div class="room-device" data-device="${device.type}">
                            <i class="fas ${device.icon}"></i>
                            <span>${device.name}</span>
                        </div>
                    `).join('')}
                </div>
            `;
            
            // Make devices clickable
            document.querySelectorAll('.room-device').forEach(device => {
                device.addEventListener('click', () => {
                    const deviceType = device.getAttribute('data-device');
                    selectDevice(deviceType, devices.find(d => d.type === deviceType));
                });
            });
        }
        
        function selectDevice(deviceType, deviceInfo) {
            homeDeviceControl.innerHTML = `
                <h3>التحكم في ${deviceInfo.name}</h3>
                <div class="device-control-panel">
                    <div class="device-control-row">
                        <button class="device-btn power-btn" data-action="power">
                            <i class="fas fa-power-off"></i> تشغيل/إيقاف
                        </button>
                    </div>
                    ${getDeviceSpecificControls(deviceType)}
                </div>
            `;
            
            // Add event listeners to device control buttons
            document.querySelectorAll('.device-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const action = btn.getAttribute('data-action');
                    
                    // Simulate device control
                    btn.classList.add('active');
                    
                    setTimeout(() => {
                        btn.classList.remove('active');
                    }, 200);
                    
                    // Update the room device visualization
                    const roomDevice = document.querySelector(`.room-device[data-device="${deviceType}"]`);
                    
                    if (action === 'power') {
                        roomDevice.classList.toggle('on');
                    }
                    
                    // Show feedback
                    alertFeedback.innerHTML = `<div class="alert-success">تم تنفيذ الأمر بنجاح!</div>`;
                    
                    setTimeout(() => {
                        alertFeedback.innerHTML = '';
                    }, 2000);
                });
            });
        }
        
        function getDeviceSpecificControls(deviceType) {
            switch(deviceType) {
                case 'tv':
                    return `
                        <div class="device-control-row">
                            <button class="device-btn" data-action="volume-up">
                                <i class="fas fa-volume-up"></i> رفع الصوت
                            </button>
                            <button class="device-btn" data-action="volume-down">
                                <i class="fas fa-volume-down"></i> خفض الصوت
                            </button>
                        </div>
                        <div class="device-control-row">
                            <button class="device-btn" data-action="channel-up">
                                <i class="fas fa-chevron-up"></i> القناة التالية
                            </button>
                            <button class="device-btn" data-action="channel-down">
                                <i class="fas fa-chevron-down"></i> القناة السابقة
                            </button>
                        </div>
                    `;
                case 'light':
                    return `
                        <div class="device-control-row">
                            <button class="device-btn" data-action="brightness-up">
                                <i class="fas fa-plus"></i> زيادة السطوع
                            </button>
                            <button class="device-btn" data-action="brightness-down">
                                <i class="fas fa-minus"></i> خفض السطوع
                            </button>
                        </div>
                        <div class="device-control-row">
                            <button class="device-btn" data-action="color-warm">
                                <i class="fas fa-sun"></i> إضاءة دافئة
                            </button>
                            <button class="device-btn" data-action="color-cool">
                                <i class="fas fa-moon"></i> إضاءة باردة
                            </button>
                        </div>
                    `;
                case 'ac':
                    return `
                        <div class="device-control-row">
                            <button class="device-btn" data-action="temp-up">
                                <i class="fas fa-plus"></i> رفع درجة الحرارة
                            </button>
                            <button class="device-btn" data-action="temp-down">
                                <i class="fas fa-minus"></i> خفض درجة الحرارة
                            </button>
                        </div>
                    `;
            }
        }
    </script>
</body>
</html>